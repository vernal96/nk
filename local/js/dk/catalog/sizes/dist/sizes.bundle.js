!function(t,e){"use strict";var n={name:"Row",props:{size:{type:Object,required:!0},productId:{type:Number,required:!0},containerWidth:{type:Number,required:!0},lang:{type:Object,required:!0},miniToCart:{type:Boolean,required:!0}},data:function(){return{sum:"",valueSum:0}},methods:{changeSum:function(t){this.sum=t.sum.format,this.valueSum=t.sum.value}},mounted:function(){this.sum=this.size.cart.sum.format,this.valueSum=this.size.cart.sum.value},components:{Counter:e.Counter},template:'\n<tr>\n    <td class="product-table__col">{{ size.title }}</td>\n    <td class="product-table__col">\n        {{ size.price }}\n    </td>\n    <td class="product-table__col product-table__col--counter">\n        <Counter \n        :min="true" \n        :startButton="false" \n        :cartCount="size.cart.count.value"\n        :productId="productId"\n        :sizeId="size.id"\n        @onChange="changeSum"\n        ></Counter>\n    </td>\n    <td class="product-table__col" :class="{\'empty\': !valueSum}">\n        <div class="total">\n            {{ sum }}\n            <a href="/cart/" class="button button--orange button--min button--small" v-if="valueSum">\n                <i class="icon icon--cart"></i>\n                <template v-if="!miniToCart">\n                    {{ lang.toCart }}\n                </template>\n            </a>\n        </div>\n    </td>\n</tr>\n'},i={name:"Table",props:{sizes:{type:Array,required:!0},productId:{type:Number,required:!0},showPlaceholder:{type:Boolean,required:!0}},data:function(){return{containerWidth:0,lang:{sizes:BX.message.SIZES_HEADER_TITLE,boxMobile:BX.message.SIZES_HEADER_BOX_MOBILE,price:BX.message.SIZES_HEADER_PRICE,priceMobile:BX.message.SIZES_HEADER_PRICE_MOBILE,count:BX.message.SIZES_HEADER_COUNT,countMobile:BX.message.SIZES_HEADER_COUNT_MOBILE,sum:BX.message.SIZES_HEADER_SUM,currency:BX.message.CURRENCY,toCart:BX.message.SIZES_TO_CART}}},computed:{sizesHeader:function(){return this.lang.sizes},priceHeader:function(){return this.containerWidth>580?this.lang.price:this.lang.priceMobile},countHeader:function(){return this.containerWidth>580?this.lang.count:this.lang.countMobile},sumHeader:function(){return this.lang.sum},miniToCart:function(){return this.containerWidth<560}},methods:{initContainerWidthListener:function(){this.$refs.table&&(this.containerWidth=this.$refs.table.clientWidth)}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.initContainerWidthListener()})),this.initContainerWidthListener()},components:{Row:n},template:'\n<table v-if="showPlaceholder" ref="table">\n    <thead>\n        <tr>\n            <th v-for="j in 4">\n                <div class="content-loader"></div>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr v-for="i in 6">\n            <td v-for="j in 4">\n                <div class="content-loader"></div>\n            </td>\n        </tr>\n    </tbody>\n</table>\n<table ref="table" v-else>\n    <thead>\n        <tr>\n            <th class="product-table__th product-table__th--size">{{ sizesHeader }}</th>\n            <th class="product-table__th product-table__th--price">{{ priceHeader }}</th>\n            <th class="product-table__th product-table__th--counter">{{ countHeader }}</th>\n            <th class="product-table__th product-table__th--total">{{ sumHeader }}</th>\n        </tr>\n    </thead>\n    <tbody>\n        <Row \n        v-for="size in sizes" \n        :key="size.id" \n        :size="size"\n        :productId="productId"\n        :containerWidth="containerWidth"\n        :lang="lang"\n        :miniToCart="miniToCart"\n        ></Row>\n    </tbody>\n</table>\n'},a={name:"Sizes",props:{productId:{type:Number,required:!1},full:{type:Boolean,required:!1,default:!1},postpone:{type:Boolean,required:!1,default:!1},sizeIdList:{type:Array,required:!1,default:[]},toggleShow:{type:Boolean,required:!1,default:!1}},data:function(){return{sizes:[],data:null,show:!0}},computed:{showPlaceholder:function(){return!this.sizes.length},showButton:function(){return this.show?BX.message.SIZES_HIDE:BX.message.SIZES_SHOW}},emits:["onInitialized"],methods:{init:function(){var t=this;BX.ajax.runComponentAction("dk:catalog","getPrices",{mode:"class",data:{id:this.productId,full:this.full,sizes:this.sizeIdList}}).then((function(e){t.sizes=e.data.sizes,t.data=e.data.data,t.$emit("onInitialized")}))},showEnter:function(t){var e=t.clientHeight;t.style.height=0,setTimeout((function(){return t.style.height=e+"px"}),0)},showAfterEnter:function(t){t.removeAttribute("style")},hideBeforeLeave:function(t){t.style.height=t.clientHeight+"px"},hideLeave:function(t){t.style.height=0}},beforeMount:function(){this.toggleShow&&(this.show=!1)},mounted:function(){this.postpone||this.init()},components:{Table:i},template:'\n<div class="product-table" v-if="full">\n    <div class="product-table__header" v-if="showPlaceholder">\n        <div class="product-table__image loader-fill"></div>\n        <div class="product-table__title content-loader"></div>\n    </div>\n    <div class="product-table__header" v-else>\n        <div \n        class="product-table__image"\n        :class="{\'pic\': data.fullImage}"\n        :data-fancybox="!!data.fullImage"\n        :data-src="data.fullImage"\n        >\n            <img :src="data.image" alt="">\n        </div>\n        <a :href="data.url" class="product-table__title">{{ data.title }}</a>\n        <div class="product-table__show" v-if="toggleShow" @click="show = !show">{{ showButton }}</div>\n    </div>\n    <transition \n        @enter="showEnter"\n        @after-enter="showAfterEnter"\n        @before-leave="hideBeforeLeave"\n        @leave="hideLeave"\n        name="vertical-slide"\n        >\n        <div class="product-table__content" v-if="show">\n            <Table\n                :showPlaceholder="showPlaceholder"\n                :productId="productId"\n                :sizes="sizes"\n            ></Table>\n        </div>\n    </transition>\n</div>\n<Table v-else\n    :showPlaceholder="showPlaceholder"\n    :productId="productId"\n    :sizes="sizes"\n></Table>\n'};t.Sizes=a}(this.DK=this.DK||{},DK);
