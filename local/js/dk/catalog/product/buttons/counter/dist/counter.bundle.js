!function(t){"use strict";var n={name:"Counter",props:{sizeId:{type:Number,required:!0},productId:{type:Number,required:!0},cartCount:{type:Number,required:!0},min:{type:Boolean,required:!1,default:!1},startButton:{type:Boolean,required:!1,default:!0}},data:function(){return{lang:{toCart:BX.message.TO_CART},count:"",loading:!1,waitTime:200,waiter:null}},methods:{add:function(){this.count=+this.count+1,this.runAction(),BX.onCustomEvent(window,"onProductCartAdd",{count:this.count,productId:this.productId,sizeId:this.sizeId})},remove:function(){+this.count&&(this.count=+this.count-1),this.count||(this.count=""),this.runAction()},set:function(){"0"!==this.count&&0!==this.count||(this.count=""),this.runAction()},runAction:function(){var t=this;this.waiter&&clearTimeout(this.waiter),this.waiter=setTimeout((function(){t.loading=!0,BX.ajax.runComponentAction("dk:catalog","cartUpdate",{mode:"class",data:{productId:t.productId,id:t.sizeId,count:+t.count}}).then((function(n){var o=n.data.count.value?n.data.count.value:"";t.loading=!1,t.count=o,t.changeCartValues(n.data),t.$emit("onChange",n.data),t.waiter=null}))}),this.waitTime)},changeCartValues:function(t){document.querySelectorAll(".total-sum").forEach((function(n){n.classList.contains("mini-cart__content")&&(t.total.sum.value?n.classList.remove("mini-cart__content--empty"):n.classList.add("mini-cart__content--empty")),n.textContent="".concat(t.total.sum.format)})),document.querySelectorAll(".total-count").forEach((function(n){n.textContent="".concat(t.total.count.format)}))}},emits:["onChange"],mounted:function(){this.count=this.cartCount?this.cartCount:""},template:'\n\t\t<div\n\t\t\tclass="button button--center button--orange button--100 button--long product__button"\n\t\t\t:class="{\'is-loading\': loading}"\n\t\t\tv-if="!count && startButton"\n\t\t\t@click="add"\n\t\t>\n\t\t\t<span class="loader" v-if="loading"></span>\n\t\t\t{{ lang.toCart }}\n\t\t</div>\n\t\t<label class="cart-counter" :class="{\'cart-counter--min\': min}" v-else>\n            <div class="cart-counter__button cart-counter__button--remove" @click="remove"></div>\n            <input type="number" class="cart-counter__count" v-model="count" @keyup="set" @change="set">\n            <div class="cart-counter__button cart-counter__button--add" @click="add"></div>\n        </label>\n\t'};t.Counter=n}(this.DK=this.DK||{});
