this.DK=this.DK||{},function(e,t,a,n){"use strict";var o,i,c={name:"headerCatalogSubcategory",props:{category:{type:Object,required:!0},useLimit:{type:Boolean,required:!0}},computed:{showCategory:function(){return this.category.showWithLimit||!this.useLimit},showSubcategories:function(){return this.category.children.length>0}},template:'\n<li v-if="showCategory">\n    <a :href="category.url">{{ limit }} {{ category.title }}</a>\n    <ul class="header-catalog__column-ul" v-if="showSubcategories">\n        <headerCatalogSubcategory\n        v-for="subCategory in category.children"\n        :key="subCategory.id"\n        :category="subCategory"\n        :useLimit="useLimit"\n        ></headerCatalogSubcategory>\n    </ul>\n</li>\n'},r={name:"headerCatalogRoot",data:function(){return{preload:!0,tree:[],activeCategory:0,limit:5,tmpLimit:0,tmpShowMore:!1}},methods:{changeActiveCategory:function(e){this.activeCategory=this.tree.find((function(t){return t.id===e}))},prepareLimit:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a&&(this.tmpLimit=0,this.tmpShowMore=!1),this.tmpShowMore||(e.showWithLimit=this.tmpLimit<=this.limit,this.tmpLimit++,e.children.map((function(e){return t.prepareLimit(e,!1)})),this.limit<=this.tmpLimit&&a&&(this.tmpShowMore=!0,e.showMore=!0)),e}},mounted:function(){var e=this;BX.ajax.runComponentAction("dk:catalog","getTree",{mode:"class"}).then((function(t){e.tree=t.data.map((function(t){return t.children.map((function(t){return e.prepareLimit(t)})),t})),e.activeCategory=e.tree[0],e.preload=!1}))},components:{Placeholder:{name:"headerCatalogPlaceholder",template:'\n<ul class="header-catalog__categories catalog-categories">\n    <li v-for="index in 8" :key="index">\n        <div class="catalog-category">\n            <div>\n                <span class="content-loader content-loader--ah catalog-category__image"></span>\n            </div>\n            <div class="catalog-category__label content-loader"></div>\n        </div>\n    </li>\n</ul>\n<div class="header-catalog__main">\n    <div class="title title--min-bottom title--h3 header-catalog__title content-loader content-loader--20"></div>\n    <div class="header-catalog__main-content">\n        <div class="header-catalog__rows">\n            <div class="header-catalog__column" v-for="index in 3" :key="index">\n                <div class="header-catalog__column-image content-loader content-loader--10 content-loader--ah content-loader--ar1"></div>\n                <div class="header-catalog__column-list">\n                    <div class="header-catalog__column-title content-loader content-loader--80"></div>\n                        <ul class="header-catalog__column-ul">\n                            <li>\n                                <div class="content-loader"></div>\n                                <ul>\n                                    <li>\n                                        <div class="content-loader content-loader--90"></div>\n                                    </li>\n                                </ul>\n                            </li>\n                            <li>\n                                <div class="content-loader content-loader--70"></div>\n                            </li>\n                            <li>\n                                <div class="header-catalog__more content-loader content-loader--20"></div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="header-catalog__products">\n                <div class="mini-product mini-product--no-price header-catalog__product" v-for="index in 6" :key="index">\n                    <div class="mini-product__image mini-product__image--no-border content-loader content-loader--ah"></div>\n                    <div class="mini-product__content">\n                        <div class="mini-product__title">\n                            <div class="content-loader content-loader--90"></div>\n                            <div class="content-loader content-loader--80"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="header-catalog__image">\n    <div class="content-loader content-loader--100h"></div>\n</div>\n'},CatalogCategory:{name:"headerCatalogCategory",props:{category:{type:Object,required:!0},activeCategory:{type:Object,required:!0}},data:function(){return{}},computed:{isActive:function(){return this.category===this.activeCategory},isNew:function(){return this.category.tags.new},isTagged:function(){return this.isNew},isEmpty:function(){return 0===this.category.children.length}},emits:["onSelect"],methods:{select:function(e){"A"!==e.target.tagName&&this.$emit("onSelect",this.category.id)}},template:'\n    <li>\n        <div\n        class="catalog-category catalog-category--alt-hover"\n        :class="{\n            \'is-active\': isActive,\n            \'is-tagged\': isTagged,\n            \'is-tagged--new\': isNew\n        }"\n         v-if="!isEmpty"\n        @click="select"\n        >\n            <img \n                :src="category.icon"\n                class="catalog-category__image"\n                v-if="category.icon"\n            >\n            <div class="catalog-category__label">\n                <a :href="category.url" class="catalog-category__link">{{ category.title }}</a>\n            </div>\n            <div class="catalog-category__arrow"></div> \n        </div>\n        <a :href="category.url"\n        class="catalog-category catalog-category--alt-hover"\n        :class="{\n            \'is-active\': isActive,\n            \'is-tagged\': isTagged,\n            \'is-tagged--new\': isNew\n        }"\n        v-else\n        >\n            <img \n                :src="category.icon"\n                class="catalog-category__image"\n                v-if="category.icon"\n            >\n            <span class="catalog-category__label">\n                {{ category.title }}\n            </span>\n        </a>\n    </li>\n'},CategoryColumn:{name:"headerCatalogColumn",props:{category:{type:Object,required:!0}},data:function(){return{useLimit:!0,lang:{more:n.Loc.getMessage("DK_CATALOG_HEADER_MORE")}}},methods:{showAll:function(){this.useLimit=!1}},components:{SubCategory:c},template:'\n<div class="header-catalog__column">\n    <img \n    :src="category.images.picture.src"\n    :alt="category.images.picture.alt"\n    :title="category.images.picture.title"\n    class="header-catalog__column-image"\n    v-if="category.images.picture"\n    >\n    <div class="header-catalog__column-list">\n        <div class="header-catalog__column-title">\n            <a :href="category.url">{{ category.title }}</a>\n        </div>\n        <ul class="header-catalog__column-ul" v-if="category.children.length">\n            <SubCategory \n            v-for="subCategory in category.children"\n            :key="subCategory.id"\n            :category="subCategory"\n            :useLimit="useLimit"\n            ></SubCategory>\n        </ul>\n        <button \n        class="more header-catalog__more" \n        v-if="category.showMore && useLimit" \n        @click="showAll"\n        >{{ lang.more }}</button>\n    </div>\n</div>\n'}},template:'\n<Placeholder v-if="preload"></Placeholder>\n<template v-else>\n    <ul class="header-catalog__categories catalog-categories scroll">\n        <CatalogCategory \n        v-for="category in tree"\n        :key="category.ID"\n        :category="category"\n        :activeCategory="activeCategory"\n        @onSelect="changeActiveCategory"\n        ></CatalogCategory>\n    </ul>\n    <div class="header-catalog__main">\n        <div class="title title--min-bottom title--h3 header-catalog__title">\n            <a :href="activeCategory.url">{{ activeCategory.title }}</a>\n        </div>\n        <div class="header-catalog__main-content scroll">\n            <div class="header-catalog__rows">\n                <CategoryColumn\n                v-for="category in activeCategory.children"\n                :key="category.id"\n                :category="category"\n                ></CategoryColumn>\n            </div>\n        </div>\n    </div>\n    <img \n    :src="activeCategory.images.detail.src"\n    class="header-catalog__image"\n    :alt="activeCategory.images.detail.alt"\n    :title="activeCategory.images.detail.title"\n    v-if="activeCategory.images.detail"\n    >\n</template>\n'};function l(e){setTimeout((function(){document.querySelectorAll(".menu__catalog").forEach((function(t){return t.classList[e]("is-active")})),o.classList[e]("is-active"),i.classList[e]("is-active"),i.classList.contains("is-active")?t.Methods.toggleBodyOverflow():t.Methods.toggleBodyOverflow(!1)}),0)}BX.ready((function(){t.Methods.on("click",".menu__catalog",(function(e){e.preventDefault(),o=document.querySelector(".".concat("header-catalog")),i=document.querySelector(".".concat("header-catalog-overlay")),o||(o=t.Methods.createStructure({classes:"header-catalog"}),i=t.Methods.createStructure({classes:"header-catalog-overlay"}),BX.Vue3.createApp(r).mount(o)),this.parentNode.append(o,i),l("toggle")})),t.Methods.on("click",".".concat("header-catalog-overlay"),(function(){return l("remove")}))}))}(this.DK.Main=this.DK.Main||{},DK,BX,BX);
