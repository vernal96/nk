!function(t,n,i,e){"use strict";var a={name:"MM",data:function(){return{socnet:{},children:[],phone:{},isActive:!1,catalogInit:!1,loadingCatalog:!1,login:"",lang:{title:BX.message.NK_MM_TITLE,fastpay:BX.message.NK_MM_FASTPAY_BUTTON,recall:BX.message.NK_MM_RECALL_BUTTON},chain:[]}},computed:{phoneLink:function(){return"tel:".concat(this.phone.link)},activeItem:function(){var t=this;return this.chain.length||(t=null),this.chain.forEach((function(n){t=t.children[n]})),t},items:function(){return this.chain.length?this.activeItem.children:this.children},mmTitle:function(){return this.activeItem?this.activeItem.title:this.lang.title}},watch:{isActive:function(t){t?i.Methods.toggleBodyOverflow():i.Methods.toggleBodyOverflow(!1)}},methods:{initMMTriggers:function(){var t=this;i.Methods.on("click",".mmo",(function(){t.isActive=!t.isActive}))},initMenuId:function(t){var n=this;return t.map((function(t){return t.id=Math.random(),t.children=n.initMenuId(t.children),t}))},changeActiveItem:function(t){this.chain.push(t)},changeActiveItemCatalog:function(t){var n=this;this.catalogInit?this.changeActiveItem(t):(this.loadingCatalog=!0,BX.ajax.runComponentAction("dk:mm","getTree",{mode:"class"}).then((function(i){n.children.find((function(t){return t.isCatalog})).children=i.data,n.loadingCatalog=!1,n.catalogInit=!0,n.changeActiveItem(t)})))},back:function(){this.chain.pop()}},mounted:function(){var t=this;BX.ajax.runComponentAction("dk:mm","getMM",{mode:"class"}).then((function(n){for(var i in n.data)t[i]=n.data[i];t.children=t.initMenuId(t.children)})),this.initMMTriggers()},components:{SocNet:DK.SocNet},template:'\n<div class="mm__main mm-item" :class="{\'is-mm\': isActive}">\n  <div class="mm__header">\n    <button class="mm__button" v-if="activeItem" @click="back">\n      <i class="icon icon--mm-back"></i>\n    </button>\n    <div class="mm__empty-button" v-else></div>\n    <div class="mm__title">\n        <template v-if="activeItem">\n            <img :src="activeItem.icon" alt="" class="mm__icon" v-if="activeItem.icon">\n            <img :src="activeItem.images.picture.src" alt="" class="mm__icon mm__icon--image" v-else-if="activeItem.images.picture">\n        </template>\n        <span class="mm__title-text">\n      {{ mmTitle }}\n      </span>\n    </div>\n    <button class="mm__button mmo">\n      <i class="icon icon--mm-close"></i>\n    </button>\n  </div>\n  <div class="mm__body hscroll">\n    <ul>\n      <li class="mm__parent" :class="{\'mm__bold\': item.isCatalog}" v-for="item, index in items" :key="item.id">\n        <a :href="item.url" class="mm__link">\n          <img :src="item.icon" alt="" class="mm__icon" v-if="item.icon">\n          <img :src="item.images.picture.src" alt="" class="mm__icon mm__icon--image" v-else-if="item.images.picture">\n          <span>\n            {{ item.title }}\n          </span>\n        </a>\n        <button class="mm__show" v-if="item.children.length" @click="changeActiveItem(index)">\n          <i class="icon icon--arrow-right-blue"></i>\n        </button>\n        <button class="mm__show" :class="{\'is-loading\': loadingCatalog}" v-if="item.isCatalog" @click="changeActiveItemCatalog(index)">\n            <span class="loader loader--gray" v-if="loadingCatalog"></span>\n          <i class="icon icon--arrow-right-blue"></i>\n        </button>\n      </li>\n    </ul>\n  </div>\n  <div class="mm__footer">\n    <div v-html="login"></div>\n    <button class="button button--link button--link-orange button--medium button--wrap button--pi0 fastpay">\n      <i class="icon icon--check-form"></i>\n      {{ lang.fastpay }}\n    </button>\n    <button class="button button--orange button--long modal-trigger" data-src="#recall">\n        {{ lang.recall }}\n    </button>\n    <div class="mm__contact">\n      <a :href="phoneLink">\n        <i class="icon icon--phone-orange"></i>\n        {{ phone.format }}\n      </a>\n    </div>\n    <SocNet :data="socnet"></SocNet>\n  </div>\n</div>\n<div class="mm__overlay mm-item mmo" :class="{\'is-mm\': isActive}"></div>\n'};BX.ready((function(){BX.Vue3.createApp(a).mount("#mm")}))}(this.DK=this.DK||{},BX,DK);
