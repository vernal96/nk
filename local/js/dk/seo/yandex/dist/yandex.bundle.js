this.BX=this.BX||{},this.BX.DK=this.BX.DK||{},function(t){"use strict";var n={init:function(){var t=this;this.impressions.init(this),BX.addCustomEvent("onSingleProductPageReady",(function(n){t.push("detail",[n.data])})),BX.addCustomEvent("onProductCartAdd",(function(n){t.push("add",[n.data.sizeId])})),BX.addCustomEvent("onCartSubmitSuccess",(function(n){t.push("purchase",n.data.items,{id:"#".concat(n.data.id),revenue:n.data.sum.value})})),BX.addCustomEvent("onCounterInit",(function(n){t.push("detail",[n.data])}))},impressions:{items:[],parent:null,init:function(t){var n=this;this.parent=t,BX.addCustomEvent("onCounterInit",(function(t){n.items.push(t.data)})),setInterval((function(){n.items.length&&(t.push("impressions",n.items),n.items=[])}),500)}},push:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0!==window.dataLayer&&BX.ajax.runAction("dk:nk.SEO.getItems",{data:{ids:n}}).then((function(n){var i=n.data;window.dataLayer.push({ecommerce:babelHelpers.defineProperty({currencyCode:"RUB"},t,{actionField:e,products:i})})})).catch((function(t){var n=t.errors;console.error(n)}))}};({id:100346127,init:function(){this.productPageReady(),this.addToCart(),this.orderSuccess(),this.phoneClick(),this.recallClick(),this.recallSubmitted(),this.cartPageReady()},sendEvent:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{ym(this.id,"reachGoal",t,n)}catch(t){console.error("YM is not defined.")}},productPageReady:function(){var t=this;BX.addCustomEvent("onProductPageReady",(function(){t.sendEvent("onProductPageReady",{url:location.pathname})}))},cartPageReady:function(){var t=this;BX.addCustomEvent("onCartPageReady",(function(){t.sendEvent("onCartPageReady")}))},addToCart:function(){var t=this;BX.addCustomEvent("onProductCartAdd",(function(n){t.sendEvent("onAddToCart",n.data)}))},orderSuccess:function(){var t=this;BX.addCustomEvent("onCartSubmitSuccess",(function(n){t.sendEvent("onOrderSuccess",n.data)}))},phoneClick:function(){var t=this;BX.addCustomEvent("onMainPhoneClick",(function(){t.sendEvent("onPhoneClick")}))},recallClick:function(){var t=this;BX.addCustomEvent("onRecallOpen",(function(){t.sendEvent("onRecallClick")}))},recallSubmitted:function(){var t=this;BX.addCustomEvent("onFormSubmitSuccess",(function(){t.sendEvent("onRecallSubmitted")}))}}).init(),n.init()}(this.BX.DK.SEO=this.BX.DK.SEO||{});
