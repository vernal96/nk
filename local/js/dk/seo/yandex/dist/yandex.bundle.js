this.BX=this.BX||{},this.BX.DK=this.BX.DK||{},function(t){"use strict";function n(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function e(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(n){babelHelpers.defineProperty(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}var i={init:function(){this.impressions.init(this)},impressions:{items:[],parent:null,init:function(t){var n=this;this.parent=t,BX.addCustomEvent("onCounterInit",(function(t){n.items.push(t.data)})),setInterval((function(){n.items.length&&(n.getData(),n.items=[])}),500)},getData:function(){var t=this;BX.ajax.runAction("dk:nk.SEO.impressions",{data:{ids:this.items}}).then((function(n){var e=n.data;t.parent.push({impressions:e})})).catch((function(t){var n=t.errors;console.error(n)}))}},push:function(t){void 0!==window.dataLayer&&window.dataLayer.push({ecommerce:e({currencyCode:"RUB"},t)})}};({id:100346127,init:function(){this.productPageReady(),this.addToCart(),this.orderSuccess(),this.phoneClick(),this.recallClick(),this.recallSubmitted(),this.cartPageReady()},sendEvent:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{ym(this.id,"reachGoal",t,n)}catch(t){console.error("YM is not defined.")}},productPageReady:function(){var t=this;BX.addCustomEvent("onProductPageReady",(function(){t.sendEvent("onProductPageReady",{url:location.pathname})}))},cartPageReady:function(){var t=this;BX.addCustomEvent("onCartPageReady",(function(){t.sendEvent("onCartPageReady")}))},addToCart:function(){var t=this;BX.addCustomEvent("onProductCartAdd",(function(n){t.sendEvent("onAddToCart",n.data)}))},orderSuccess:function(){var t=this;BX.addCustomEvent("onCartSubmitSuccess",(function(n){t.sendEvent("onOrderSuccess",n.data)}))},phoneClick:function(){var t=this;BX.addCustomEvent("onMainPhoneClick",(function(){t.sendEvent("onPhoneClick")}))},recallClick:function(){var t=this;BX.addCustomEvent("onRecallOpen",(function(){t.sendEvent("onRecallClick")}))},recallSubmitted:function(){var t=this;BX.addCustomEvent("onFormSubmitSuccess",(function(){t.sendEvent("onFormSubmitSuccess")}))}}).init(),i.init()}(this.BX.DK.SEO=this.BX.DK.SEO||{});
